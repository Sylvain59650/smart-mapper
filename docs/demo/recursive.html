<html>

<head>
  <title>smart-mapper</title>
  <script src="../3parts/htmlElement.min.js"></script>
  <script src="../3parts/htmlElement-events.min.js"></script>
  <link href="https://sylvain59650.github.io/demonstrator/css/demo.css" type="text/css" rel="stylesheet" />
  <link href="https://sylvain59650.github.io/demonstrator/css/style.css" type="text/css" rel="stylesheet" />

  <script src="../3parts/passthrough-object.min.js"></script>
  <script src="modules/smart-mapper/distrib/smart-mapper.min.js"></script>
</head>

<body>
  <style>
    table {
      border: solid 1px gray;
      border-collapse: collapse;
    }
    
    hr {
      border: solid 2px gray;
    }
    
    th {
      border: solid 1px gray;
    }
    
    td.top {
      vertical-align: top;
      border: solid 1px gray;
      max-width: 450px;
      overflow-x: scroll;
    }
    
    .w100 {
      max-width: 100px;
    }
    
    .note {
      padding: 3px;
      margin: 3px;
      background-color: royalblue;
      color: white;
      font-weight: bolder;
      border: solid 1px blue;
    }
    
    #btnTest {
      background-color: green;
      font-weight: bolder;
      color: white;
      border: solid 3px;
      border-radius: 10px 10px 10px 10px;
      padding: 3px;
      min-width: 80px;
      min-height: 40px;
      cursor: pointer;
    }
  </style>
  <div class="breadcrumb">
    <a href="https://www.npmjs.com/package/smart-mapper" title="NPM">
      <img src="https://sylvain59650.github.io/smart-mapper/img/npm.png" height="32"></a>
    <a href="https://github.com/Sylvain59650/smart-mapper" title="GitHub"><img src="https://github.com/favicon.ico" height="32" /></a>
  </div>

  <div style="display:inline">
    <a target="_blank" title="build" href="https://travis-ci.org/Sylvain59650/smart-mapper"><img src="https://travis-ci.org/Sylvain59650/smart-mapper.png?branch=master" /></a>
    <a target="_blank" title="version" href="https://www.npmjs.com/package/smart-mapper"><img src="https://img.shields.io/npm/v/smart-mapper.svg" /></a>
    <a target="_blank" title="package" href="https://github.com/Sylvain59650/smart-mapper"><img src="https://img.shields.io/github/package-json/v/Sylvain59650/smart-mapper.svg" /></a>
    <a target="_blank" title="dependencies" href="https://david-dm.org/Sylvain59650/smart-mapper"><img src="https://img.shields.io/david/Sylvain59650/smart-mapper.svg" /></a>
    <a target="_blank" title="dependencies graph" href="https://npm.anvaka.com/#/view/2d/smart-mapper"><img src="https://img.shields.io/badge/dependencies-graph-blue.svg" /></a>
    <img src="https://img.shields.io/bundlephobia/min/smart-mapper.svg" />
    <img src="https://img.shields.io/badge/eslint-ok-blue.svg" />
    <a target="_blank" title="tests" href="https://sylvain59650.github.io/smart-mapper/"><img src="https://img.shields.io/badge/tests-passing-brightgreen.svg" /></a>
    <a target="_blank" title="downloads" href="https://www.jsdelivr.com/package/npm/smart-mapper"><img src="https://data.jsdelivr.com/v1/package/npm/smart-mapper/badge" /></a>
    <a target="_blank" title="cdn" href="https://cdn.jsdelivr.net/npm/smart-mapper/distrib/smart-mapper.min.js"><img src="https://img.shields.io/badge/cdn-jsdeliv-black.svg" /></a>
    <img src="https://img.shields.io/npm/l/smart-mapper.svg" />
    <img src="https://hits.dwyl.com/Sylvain59650/smart-mapper.svg" />
  </div>

  <div class="breadcrumb">
    <a href="index.html">Home</a> &gt;
    <h2>Recursive Data</h2>
  </div>

  <script id="code">
    var entryData = [{
      "Id": 359,
      "Title": "Processus : MANAGEMENT STRATEGIQUE",
      "Childs": [{
        "Id": 589,
        "Title": "PMT vision et note strategique"
      }, {
        "Id": 590,
        "Title": "vision et volontes strategiques"
      }, {
        "Id": 671,
        "Title": "Les valeurs et la charte de deontologie",
        "Childs": [{
          "Id": 610,
          "Title": "Code d'integrite des partenaires"
        }, {
          "Id": 672,
          "Title": "Le code d'integrite"
        }]
      }, {
        "Id": 362,
        "Title": "Plan à Moyen Terme (PMT)",
        "Childs": [{
          "Id": 583,
          "Title": "Processus PMT 2016-2020",
          "Childs": [{
            "Id": 584,
            "Title": "Note de presentation type par domaines du PMT 2016-2020"
          }, {
            "Id": 585,
            "Title": "Note de presentation type par domaines du PMT 2016-2020 - Mise à jour du PMT 2015-2019"
          }, {
            "Id": 586,
            "Title": "Note de presentation type par zones geographiques du PMT 2016-2020"
          }, {
            "Id": 587,
            "Title": "Note de presentation type par zones geographiques du PMT 2016-2020 - Mise à jour du PMT 2015-2019"
          }]
        }]
      }, {
        "Id": 364,
        "Title": "Acquisition d'entreprises",
        "Childs": [{
          "Id": 363,
          "Title": "Comite des acquisitions"
        }]
      }]
    }, {
      "Id": 541,
      "Title": "PROCESSUS M2 - Management operationnel",
      "Childs": [{
        "Id": 420,
        "Title": "Referentiel du Directeur General de la filiale"
      }, {
        "Id": 422,
        "Title": "Integration nouvelles filiales"
      }, {
        "Id": 424,
        "Title": "Gouvernance des filiales",
        "Childs": [{
          "Id": 418,
          "Title": "Delegation de pouvoirs"
        }, {
          "Id": 421,
          "Title": "Fiche juridique filiale",
          "Childs": [{
            "Id": 419,
            "Title": "Modèle de fiche juridique filiale"
          }, {
            "Id": 423,
            "Title": "Guide de la vie sociale"
          }]
        }]
      }, {
        "Id": 548,
        "Title": "Rôle et responsabilite des instances de gouvernance du Groupe",
        "Childs": [{
          "Id": 575,
          "Title": "Composition des instances de direction du Groupe"
        }]
      }, {
        "Id": 430,
        "Title": "Cycle de management.",
        "Childs": [{
          "Id": 594,
          "Title": "Calendrier de management 2017"
        }]
      }, {
        "Id": 632,
        "Title": "Note d'Organisation"
      }, {
        "Id": 435,
        "Title": "Procedure de gestion des situations d’urgence et de crise",
        "Childs": [{
          "Id": 436,
          "Title": "Manuel de gestion de la communication de crise"
        }, {
          "Id": 648,
          "Title": "Test de la procedure de gestion des situations d’urgence et de crise"
        }, {
          "Id": 649,
          "Title": "Cellule de crise : contacts et localisation"
        }]
      }, {
        "Id": 431,
        "Title": "Management de la Performance."
      }, {
        "Id": 540,
        "Title": "maitrise des prestations non-conformes"
      }]
    }];
  </script>

  <script id="template">
    var template = {
      mappings: {
        id: "Id",
        title: "Title",
        childs: "Childs"
      },
      childrens: node => node.childs,
      childrenPropertyName: "childrens"
    };
  </script>

  <p class="note">You can edit entryData & template before click on test button</p>
  <table style="min-width:1280px">
    <tr>
      <th>entry data (entryData)</th>
      <th class="w100">template</th>
      <th>result (outData)</th>
    </tr>
    <tr>
      <td class="top"><pre><xmp id="codeToInsert" contenteditable="true"></xmp></pre></td>
      <td class="top"><pre> 
            <xmp id="templateToInsert" contenteditable="true"></xmp>
   </pre>
        <hr/>
        <p class="code"> let outData = SmartMapper.mapping(template, entryData);</p>
        <button id="btnTest">Test</button>
      </td>
      <td class="top"><pre id="response" class="code"></pre></td>
    </tr>
  </table>

  <script>
    var code = qsi("code").text;
    qsi("codeToInsert").html(code);

    var templateText = qsi("template").text;
    qsi("templateToInsert").html(templateText);

    qsi("btnTest").on("click", function() {
      var response = qsi("response");
      eval(qsi("templateToInsert").text());
      eval(qsi("codeToInsert").text());
      let outData = SmartMapper.mapping(template, entryData);
      response.html(JSON.stringify(outData).replace(/}/g, "}\n"));
    });
  </script>
</body>

</html>