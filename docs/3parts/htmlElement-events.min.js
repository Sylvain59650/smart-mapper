"use strict";/* global getEventListeners registerLongMousedown registerLongKeydown disableContextMenu*/window.registerEvent=function(elem,evtName,fn,option){if(evtName==="longmousedown"){registerLongMousedown(elem,fn)}else if(evtName==="longkeydown"){registerLongKeydown(elem,fn)}else if(evtName==="nocontextmenu"){elem.oncontextmenu=disableContextMenu}else{elem.addEventListener(evtName,fn,option||false)}};window.unregisterEvent=function(elem,evtName,fn){if(evtName==="nocontextmenu"){elem.oncontextmenu=null}else{if(window.isDef(fn)){elem.removeEventListener(evtName,fn,false)}else{var events=getEventListeners(elem);if(window.isDef(events)&&window.isDef(events[evtName])){for(var j=0;j<events[evtName].length;j++){var e=events[evtName][j];elem.removeEventListener(evtName,e.listener)}}}}};HTMLElement.prototype.on=function(evtName,fn,option){var _this=this;var evts=evtName.split(" ");var cb=fn;var _loop=function _loop(i){var evt=evts[i];if(_this.addEventListener){if(!!document.documentMode&&option&&option.once){self=_this;fn.removed=false;_oneCall=function oneCall(){if(!fn.removed){fn();fn.removed=true;self.off(evt,_oneCall)}};cb=_oneCall}window.registerEvent(_this,evt,cb,option||false)}else if(_this.attachEvent){_this.attachEvent("on"+evt,fn)}};for(var i=0;i<evts.length;i++){var self;var _oneCall;_loop(i)}};HTMLElement.prototype.off=function(evtNames,fn){var evts=evtNames.split(" ");for(var i=0;i<evts.length;i++){var _evt=evts[i];if(this.removeEventListener){window.unregisterEvent(this,_evt,fn)}else if(this.detachEvent){this.detachEvent("on"+_evt,fn)}}};(function(){function registerLongMousedown(elem,fn){var timer=0;elem.on("mousedown",function(e){var cb=function cb(){fn(e)};timer=window.setTimeout(cb,500)});elem.on("mouseup",function(){window.clearTimeout(timer)})}function registerLongKeydown(elem,fn){var timer=0;elem.on("keydown",function(e){var cb=function cb(){fn(e)};timer=window.setTimeout(cb,500)});elem.on("keyup",function(){window.clearTimeout(timer)})}});function disableContextMenu(ev){ev.stopImmediatePropagation();ev.cancelBubble=true;return false}document.NoContextMenu=function(){document.oncontextmenu=disableContextMenu};HTMLElement.prototype.NoContextMenu=function(){this.addEventListener("contextmenu",disableContextMenu)};NodeList.prototype.on=function(evtName,fn,option){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;item.on(evtName,fn,option)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}};NodeList.prototype.off=function(evtName,fn){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var item=_step2.value;item.off(evtName,fn)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}};window.on=window.addEventListener;document.on=document.addEventListener;window.off=window.removeEventListener;document.off=document.removeEventListener;window.isDef=function(obj){return obj!==null&&typeof obj!=="undefined"};(function(){if(typeof window.CustomEvent==="function"){return false}function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();document.fireEvent=function(eventName,detail){var myEvent=new CustomEvent(eventName,{detail:detail});document.dispatchEvent(myEvent)};