(function(global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports);
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports);
    global.Path = mod.exports;
  }
})(this, function(exports) {
  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  function get(object, path, defaultValue) {
    path = path.replace("[", ".").replace("]", "");
    if (path[0] === ".") {
      path = path.substr(1);
    }
    var ps = path.split(".");
    var i = 0;
    var length = ps.length;
    while (object !== null && i < length) {
      object = object[ps[i]];
      i++;
    }
    if (object === null) {
      return defaultValue;
    }
    return object;
  }

  function isDef(value) {
    return value !== null && typeof value !== "undefined";
  }

  function set(object, path, value) {
    var ori = object;
    path = path.replace("[", ".").replace("]", "");
    if (path[0] === ".") {
      path = path.substr(1);
    }
    var ps = path.split(".");
    var i = 0;
    var length = ps.length;
    var old = object;
    while (object !== null && i < length - 1) {
      old = object;
      object = object[ps[i]];
      i++;
    }
    if (!isDef(object)) {
      if (i < length) {
        Object.assign(old[ps[i]], value);
      }
    } else {
      var key = ps[i];
      if (isDef(object[key])) {
        Object.assign(object[key], value);
      } else {
        Object.assign(old, value);
      }
    }
    return ori;
  }

  exports.get = get;
  exports.set = set;
});