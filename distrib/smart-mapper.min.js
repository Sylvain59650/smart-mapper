'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/**
 * @license
 * smart-mapper  0.0.9
 * Copyright Sylvain Longepee
 * Released under MIT license
 */;(function(moduleName,root,factory){if(typeof define==='function'&&define.amd){}else if((typeof exports==='undefined'?'undefined':_typeof(exports))==='object'){module.exports=factory();}else{root.SmartMapper=factory();}})("SmartMapperModule",undefined,function(){'use strict';var SmartMapper={};function isObject(anything){return anything!==null&&(typeof anything==='undefined'?'undefined':_typeof(anything))==="object";}SmartMapper.get=get;function get(object,path,defaultValue){path=path.replace("[",".").replace("]","");if(path.startsWith("."))path=path.substr(1);var ps=path.split(".");var i=0;var length=ps.length;while(object!=null&&i<length){object=object[ps[i]];i++;}if(object==null)return defaultValue;return object;}function mappingObject(compiles,item,array,index){var target={};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=compiles[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var compile=_step.value;var value=get(item,compile.relateTo,null);if(compile.operate&&value!=null){value=compile.operate.execute(value,item,array,index);}target[compile.key]=value;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return target;}function compile(template){var compiles=[];for(var key in template.mappings){var compile={key:key,relateTo:template.mappings[key],operate:template.rules!=null?template.rules.find(function(x){return x.on===key;}):null};compiles.push(compile);}return compiles;}SmartMapper.mapping=function(template,data){var compiles=compile(template);if(Array.isArray(data)){var target=[];for(var i=0;i<data.length;i++){target.push(mappingObject(compiles,data[i],data,i));}return target;}return mappingObject(compiles,data,data,-1);};return SmartMapper;});